
<!DOCTYPE html>
<html>
<head>
    <title>Habit Tracker</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <style>
        body { font-family: sans-serif; padding: 20px; max-width: 600px; margin: auto; background: #f0f4f8; }
        h1 { text-align: center; }
        label { display: block; margin-top: 15px; font-weight: bold; }
        input[type="checkbox"] { margin-right: 10px; }
        .entry { border: 1px solid #ccc; padding: 10px; margin-top: 20px; background: white; }
        .habit-group { margin-bottom: 10px; }
        .inline-input { display: flex; align-items: center; gap: 10px; margin-top: 5px; }
        .inline-input input[type="number"] { width: 100px; }
        button { width: 100%; padding: 10px; margin-top: 20px; font-size: 16px; }
    </style>
</head>
<body>

    <h1>Daily Habit Tracker</h1>

    <form id="habitForm">
        <label for="date">Date</label>
        <input type="date" id="date" value="2025-03-21" required>

        <div class="habit-group">
            <label>Today's Habits</label>
            <div class="inline-input">
                <label><input type="checkbox" name="habit" value="Gym" id="gymCheckbox"> Gym</label>
                <input type="number" id="caloriesBurned" placeholder="Calories" min="0" style="display:none;" />
            </div>
            <label><input type="checkbox" name="habit" value="Healthy Eating"> Healthy Eating</label>
            <label><input type="checkbox" name="habit" value="Reading"> Reading</label>
            <label><input type="checkbox" name="habit" value="Sleep before 11pm"> Sleep before 11pm</label>
        </div>

        <label for="notes">Notes</label>
        <textarea id="notes" placeholder="Reflections, struggles, or wins today..."></textarea>

        <button type="submit">Save Day</button>
    </form>

    <div class="entry">
        <h3>Log</h3>
        <div id="logEntries"></div>
    </div>

    <script>
        const form = document.getElementById("habitForm");
        const logEntries = document.getElementById("logEntries");
        const gymCheckbox = document.getElementById("gymCheckbox");
        const caloriesBurnedInput = document.getElementById("caloriesBurned");

        window.onload = () => {
            const saved = JSON.parse(localStorage.getItem("dailyHabits")) || [];
            saved.forEach(addEntryToLog);
        }

        gymCheckbox.addEventListener("change", () => {
            caloriesBurnedInput.style.display = gymCheckbox.checked ? "inline-block" : "none";
        });

        form.onsubmit = function(e) {
            e.preventDefault();

            const date = document.getElementById("date").value;
            const notes = document.getElementById("notes").value;
            const checkboxes = document.querySelectorAll('input[name="habit"]:checked');
            const habits = Array.from(checkboxes).map(cb => cb.value);
            const calories = gymCheckbox.checked ? parseInt(caloriesBurnedInput.value) || 0 : 0;

            const entry = { date, habits, calories, notes };
            let dailyHabits = JSON.parse(localStorage.getItem("dailyHabits")) || [];
            dailyHabits.push(entry);
            localStorage.setItem("dailyHabits", JSON.stringify(dailyHabits));

            addEntryToLog(entry);
            form.reset();
            caloriesBurnedInput.style.display = "none";
        }

        function addEntryToLog(entry) {
            const div = document.createElement("div");
            const caloriesText = entry.calories > 0 ? ` ðŸ”¥ ${entry.calories} cal` : '';
            div.innerHTML = `<strong>${entry.date}</strong><br>âœ… ${entry.habits.join(', ')}${caloriesText}<br><em>${entry.notes}</em>`;
            logEntries.prepend(div);
        }
    </script>

</body>
</html>
